@tailwind base;
@tailwind components;
@tailwind utilities;

@import 'tailwindcss';

@plugin 'tailwindcss-animate';

@source '../views';
@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';

@custom-variant dark (&:is(.dark *));

@theme {
    --font-sans:
        'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
        'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';

    --radius-lg: var(--radius);
    --radius-md: calc(var(--radius) - 2px);
    --radius-sm: calc(var(--radius) - 4px);

    --color-background: var(--background);
    --color-foreground: var(--foreground);

    --color-card: var(--card);
    --color-card-foreground: var(--card-foreground);

    --color-popover: var(--popover);
    --color-popover-foreground: var(--popover-foreground);

    --color-primary: var(--primary);
    --color-primary-foreground: var(--primary-foreground);

    --color-secondary: var(--secondary);
    --color-secondary-foreground: var(--secondary-foreground);

    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);

    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);

    --color-destructive: var(--destructive);
    --color-destructive-foreground: var(--destructive-foreground);

    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--ring);

    --color-chart-1: var(--chart-1);
    --color-chart-2: var(--chart-2);
    --color-chart-3: var(--chart-3);
    --color-chart-4: var(--chart-4);
    --color-chart-5: var(--chart-5);

    --color-sidebar: var(--sidebar);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-ring: var(--sidebar-ring);
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentColor);
    }
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    }

    html {
        scroll-behavior: smooth;
    }
}

:root {
    --color-border: oklch(0.922 0 0);
    --color-background: oklch(1 0 0);
    --color-foreground: oklch(0.145 0 0);
    --color-primary: oklch(0.205 0 0);
    --color-primary-foreground: oklch(0.985 0 0);
    --color-secondary: oklch(0.97 0 0);
    --color-secondary-foreground: oklch(0.205 0 0);
    --color-muted: oklch(0.97 0 0);
    --color-muted-foreground: oklch(0.556 0 0);
    --color-accent: oklch(0.97 0 0);
    --color-accent-foreground: oklch(0.205 0 0);
    --color-destructive: oklch(0.577 0.245 27.325);
    --color-destructive-foreground: oklch(0.577 0.245 27.325);
    --color-card: oklch(1 0 0);
    --color-card-foreground: oklch(0.145 0 0);
    --color-popover: oklch(1 0 0);
    --color-popover-foreground: oklch(0.145 0 0);
    --color-chart-1: oklch(0.646 0.222 41.116);
    --color-chart-2: oklch(0.6 0.118 184.704);
    --color-chart-3: oklch(0.398 0.07 227.392);
    --color-chart-4: oklch(0.828 0.189 84.429);
    --color-chart-5: oklch(0.769 0.188 70.08);
    --color-sidebar: oklch(0.985 0 0);
    --color-sidebar-foreground: oklch(0.145 0 0);
    --color-sidebar-primary: oklch(0.205 0 0);
    --color-sidebar-primary-foreground: oklch(0.985 0 0);
    --color-sidebar-accent: oklch(0.97 0 0);
    --color-sidebar-accent-foreground: oklch(0.205 0 0);
    --color-sidebar-border: oklch(0.922 0 0);
    --color-sidebar-ring: oklch(0.87 0 0);
    --radius: 0.625rem;
}

.dark {
    --color-border: oklch(0.269 0 0);
    --color-background: oklch(0.145 0 0);
    --color-foreground: oklch(0.985 0 0);
    --color-primary: oklch(0.985 0 0);
    --color-primary-foreground: oklch(0.205 0 0);
    --color-secondary: oklch(0.269 0 0);
    --color-secondary-foreground: oklch(0.985 0 0);
    --color-muted: oklch(0.269 0 0);
    --color-muted-foreground: oklch(0.708 0 0);
    --color-accent: oklch(0.269 0 0);
    --color-accent-foreground: oklch(0.985 0 0);
    --color-destructive: oklch(0.396 0.141 25.723);
    --color-destructive-foreground: oklch(0.637 0.237 25.331);
    --color-card: oklch(0.145 0 0);
    --color-card-foreground: oklch(0.985 0 0);
    --color-popover: oklch(0.145 0 0);
    --color-popover-foreground: oklch(0.985 0 0);
    --color-chart-1: oklch(0.488 0.243 264.376);
    --color-chart-2: oklch(0.696 0.17 162.48);
    --color-chart-3: oklch(0.769 0.188 70.08);
    --color-chart-4: oklch(0.627 0.265 303.9);
    --color-chart-5: oklch(0.645 0.246 16.439);
    --color-sidebar: oklch(0.205 0 0);
    --color-sidebar-foreground: oklch(0.985 0 0);
    --color-sidebar-primary: oklch(0.985 0 0);
    --color-sidebar-primary-foreground: oklch(0.985 0 0);
    --color-sidebar-accent: oklch(0.269 0 0);
    --color-sidebar-accent-foreground: oklch(0.985 0 0);
    --color-sidebar-border: oklch(0.269 0 0);
    --color-sidebar-ring: oklch(0.439 0 0);
    --radius: 0.625rem;
}

/* Enhanced Components */
@layer components {
    /* Loading and Animation Utilities */
    .animate-pulse-slow {
        animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    .animate-bounce-gentle {
        animation: bounce-gentle 2s infinite;
    }

    @keyframes bounce-gentle {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-4px);
        }
    }

    .animate-slide-in {
        animation: slide-in 0.3s ease-out forwards;
    }

    @keyframes slide-in {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in {
        animation: fade-in 0.5s ease-out forwards;
    }

    @keyframes fade-in {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    /* Enhanced Button Styles */
    .btn-primary {
        @apply relative overflow-hidden rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-3 font-semibold text-white shadow-lg transition-all duration-300 hover:from-blue-700 hover:to-purple-700 hover:shadow-xl hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
    }

    .btn-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
    }

    .btn-primary:hover::before {
        left: 100%;
    }

    .btn-secondary {
        @apply rounded-lg bg-gray-600 px-6 py-3 font-medium text-white transition-all duration-300 hover:bg-gray-700 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2;
    }

    .btn-success {
        @apply rounded-lg bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-3 font-semibold text-white shadow-lg transition-all duration-300 hover:from-green-700 hover:to-emerald-700 hover:shadow-xl hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2;
    }

    .btn-disabled {
        @apply cursor-not-allowed rounded-lg bg-gray-400 px-6 py-3 font-medium text-gray-600 opacity-60;
    }

    /* Enhanced Card Styles */
    .card-glass {
        @apply rounded-xl border border-white/20 bg-white/10 backdrop-blur-md shadow-xl;
    }

    .card-elevated {
        @apply rounded-xl bg-white shadow-2xl transition-all duration-300 hover:shadow-3xl hover:scale-[1.02];
    }

    .card-dark {
        @apply rounded-xl bg-gray-800/90 backdrop-blur-sm border border-gray-700/50 shadow-xl;
    }

    /* Enhanced Input Styles */
    .input-modern {
        @apply w-full rounded-lg border border-gray-300 bg-white/95 px-4 py-3 text-gray-900 backdrop-blur-sm transition-all duration-200 placeholder:text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20;
    }

    .input-dark {
        @apply w-full rounded-lg border border-gray-600 bg-gray-800/50 px-4 py-3 text-white backdrop-blur-sm transition-all duration-200 placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20;
    }

    /* Status Indicators */
    .status-success {
        @apply flex items-center space-x-3 rounded-lg bg-green-500/10 border border-green-500/20 p-4 text-green-400;
    }

    .status-warning {
        @apply flex items-center space-x-3 rounded-lg bg-yellow-500/10 border border-yellow-500/20 p-4 text-yellow-400;
    }

    .status-error {
        @apply flex items-center space-x-3 rounded-lg bg-red-500/10 border border-red-500/20 p-4 text-red-400;
    }

    .status-info {
        @apply flex items-center space-x-3 rounded-lg bg-blue-500/10 border border-blue-500/20 p-4 text-blue-400;
    }

    /* Map and Layout Specific */
    .map-container-modern {
        @apply overflow-hidden rounded-xl border border-white/20 shadow-2xl backdrop-blur-sm;
    }

    .sidebar-modern {
        @apply space-y-6 rounded-xl bg-white/10 border border-white/20 p-6 backdrop-blur-md;
    }

    .progress-indicator {
        @apply flex items-center space-x-3 rounded-lg bg-white/10 border border-white/20 p-4 backdrop-blur-sm;
    }

    .area-button {
        @apply group relative w-36 rounded-lg px-4 py-3 text-sm font-semibold transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
    }

    .area-button-active {
        @apply bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg scale-105;
    }

    .area-button-selected {
        @apply bg-blue-500 text-white shadow-md;
    }

    .area-button-default {
        @apply bg-gray-700 text-gray-200 hover:bg-gray-600;
    }

    /* Gradient Backgrounds */
    .bg-app-gradient {
        background: linear-gradient(135deg, 
            #1e293b 0%, 
            #1e40af 25%, 
            #7c3aed 50%, 
            #1e293b 75%, 
            #0f172a 100%);
        background-size: 200% 200%;
        animation: gradient-shift 15s ease infinite;
    }

    @keyframes gradient-shift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .bg-card-gradient {
        background: linear-gradient(135deg, 
            rgba(255, 255, 255, 0.1) 0%, 
            rgba(255, 255, 255, 0.05) 100%);
    }

    /* Leaflet Map Enhancements */
    .leaflet-container {
        @apply rounded-xl;
    }

    .leaflet-popup-content-wrapper {
        @apply rounded-lg bg-white/95 backdrop-blur-sm shadow-xl;
    }

    .leaflet-popup-tip {
        @apply bg-white/95;
    }

    /* Loading Spinner Variations */
    .spinner-dots {
        display: inline-flex;
        gap: 4px;
    }

    .spinner-dots div {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background-color: currentColor;
        animation: spinner-dots 1.4s infinite ease-in-out;
    }

    .spinner-dots div:nth-child(1) { animation-delay: -0.32s; }
    .spinner-dots div:nth-child(2) { animation-delay: -0.16s; }

    @keyframes spinner-dots {
        0%, 80%, 100% {
            transform: scale(0.8);
            opacity: 0.5;
        }
        40% {
            transform: scale(1);
            opacity: 1;
        }
    }

    /* Enhanced Form Elements */
    .form-group {
        @apply space-y-2;
    }

    .form-label {
        @apply block text-sm font-semibold text-gray-300;
    }

    .form-label-required::after {
        content: ' *';
        @apply text-red-400;
    }

    .form-help {
        @apply text-xs text-gray-400 leading-relaxed;
    }

    .form-error {
        @apply text-sm text-red-400 flex items-center space-x-2;
    }

    /* Responsive Utilities */
    .container-responsive {
        @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8;
    }

    .grid-responsive {
        @apply grid grid-cols-1 gap-6 lg:grid-cols-4;
    }

    .sidebar-responsive {
        @apply lg:col-span-1 space-y-6;
    }

    .content-responsive {
        @apply lg:col-span-3 space-y-6;
    }

    /* Accessibility Enhancements */
    .focus-visible {
        @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
    }

    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    /* Dark mode specific enhancements */
    .dark .card-glass {
        @apply bg-gray-900/30 border-gray-700/30;
    }

    .dark .input-modern {
        @apply bg-gray-800 border-gray-600 text-white;
    }
}

.force-visible {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 9999 !important;
}