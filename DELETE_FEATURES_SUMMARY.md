# สรุปการเพิ่มฟีเจอร์ลบพื้นที่หลักและลบท่อ

## ฟีเจอร์ที่เพิ่มเข้ามา

### 1. ลบพื้นที่หลัก (Delete Main Area)
- **ตำแหน่ง**: ปุ่ม "ลบพื้นที่หลัก" อยู่ใต้สถานะ "สร้างพื้นที่หลักแล้ว"
- **การทำงาน**: 
  - เมื่อกดปุ่มจะแสดง Modal ยืนยันการลบ
  - Modal แสดงคำเตือนว่าการลบจะลบทุกอย่างในแผนที่
  - เมื่อยืนยันจะลบพื้นที่หลัก, ต้นไม้, ท่อ, โซน และรีเซ็ตทุกอย่างเป็นค่าเริ่มต้น
- **การแปลภาษา**: เพิ่มคำแปลทั้งภาษาไทยและอังกฤษ

### 2. ลบท่อ (Delete Pipes)
- **ตำแหน่ง**: ปุ่ม "ลบท่อ" อยู่ก่อนปุ่ม Undo/Redo ในส่วนระบบน้ำ
- **การทำงาน**:
  - เมื่อกดปุ่มจะเข้าสู่โหมดลบท่อ (isDeleteMode = true)
  - ปุ่มจะเปลี่ยนเป็น "❌ ลบท่อ" เมื่ออยู่ในโหมดลบ
  - แสดงข้อความ "คลิกที่ท่อที่ต้องการลบ"
  - เมื่อคลิกท่อจะแสดง confirm dialog และลบท่อนั้น
- **ประเภทท่อที่ลบได้**:
  - ท่อเมน (Main Pipe)
  - ท่อเมนรอง (Sub-Main Pipe) 
  - ท่อย่อย (Branch Pipe)
  - ท่อย่อยใหม่ (Lateral Pipe)

## การเปลี่ยนแปลงในโค้ด

### 1. เพิ่ม State
```typescript
const [isDeleteMode, setIsDeleteMode] = useState(false);
const [showDeleteMainAreaConfirm, setShowDeleteMainAreaConfirm] = useState(false);
```

### 2. เพิ่มฟังก์ชัน
- `handleDeleteMainArea()`: ลบพื้นที่หลักและรีเซ็ตทุกอย่าง
- `handleDeletePipe()`: ลบท่อตามประเภทที่ระบุ

### 3. แก้ไขการคลิกท่อ
- เพิ่มการตรวจสอบ `isDeleteMode` ในทุกการคลิกท่อ
- เมื่ออยู่ในโหมดลบจะแสดง confirm dialog และลบท่อ

### 4. เพิ่ม Modal ยืนยันการลบพื้นที่หลัก
- แสดงคำเตือนและรายละเอียดการลบ
- ปุ่มยกเลิกและยืนยันการลบ

### 5. เพิ่มการแปลภาษา
- เพิ่มคำแปลใน `resources/js/contexts/translations/horticulture.ts`
- รองรับทั้งภาษาไทยและอังกฤษ

### 6. การรีเซ็ตโหมดลบ
- รีเซ็ตโหมดลบเมื่อ:
  - ลบพื้นที่หลัก
  - ลบท่อ
  - เปลี่ยนโหมดแก้ไข
  - วาดเสร็จ

## วิธีการใช้งาน

### ลบพื้นที่หลัก
1. กดปุ่ม "ลบพื้นที่หลัก" ใต้สถานะพื้นที่หลัก
2. ยืนยันการลบใน Modal
3. ระบบจะลบทุกอย่างและรีเซ็ตเป็นค่าเริ่มต้น

### ลบท่อ
1. กดปุ่ม "ลบท่อ" ในส่วนระบบน้ำ
2. ปุ่มจะเปลี่ยนเป็น "❌ ลบท่อ" และแสดงข้อความแนะนำ
3. คลิกที่ท่อที่ต้องการลบ
4. ยืนยันการลบใน confirm dialog
5. ท่อจะถูกลบและออกจากโหมดลบอัตโนมัติ

## ข้อควรระวัง
- การลบพื้นที่หลักไม่สามารถยกเลิกได้
- การลบท่อจะรีเซ็ตโหมดลบอัตโนมัติ
- ควรใช้อย่างระมัดระวังเพราะอาจสูญเสียข้อมูลที่สำคัญ
